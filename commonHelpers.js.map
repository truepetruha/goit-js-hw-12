{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = '41849458-2d98265cf06659a45ba73a30c';\n\nexport async function getPhotos(value, page = 1) {\n  try {\n    const response = await axios.get(`${BASE_URL}/`, {\n      params: {\n        key: API_KEY,\n        q: value,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: 15,\n        page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error('Sorry! Try later! Server not working');\n  }\n}\n","import iziToast from 'izitoast';\n\nexport const hiddenClass = 'is-hidden';\n\nexport function showErrorMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    titleSize: '30',\n    messageSize: '25',\n    message,\n  });\n}\n\nexport function hideElement(element) {\n  element.classList.add(hiddenClass);\n}\n\nexport function showElement(element) {\n  element.classList.remove(hiddenClass);\n}\n\nexport function resetForm(form) {\n  form.reset();\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getPhotos } from './js/pixabay-api';\nimport { showErrorMessage, hiddenClass, hideElement, showElement, resetForm } from './js/render-functions';\n\nconst modalLightboxGallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst searchForm = document.querySelector('.js-search-form');\nconst ulEl = document.querySelector('.list-photo');\nconst btnLoadMore = document.querySelector('[data-action=\"load-more\"]');\nconst loader = document.querySelector('.loader');\nconst loaderLoadMore = document.querySelector('.loader-load-more');\n\nlet page = 1;\nlet maxPage = 0;\nlet query = '';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  btnLoadMore.classList.add(hiddenClass);\n});\n\nsearchForm.addEventListener('submit', handleSearch);\nbtnLoadMore.addEventListener('click', handleLoadMore);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  ulEl.innerHTML = '';\n\n  loader.classList.remove(hiddenClass);\n\n  page = 1;\n\n  const form = event.currentTarget;\n  query = form.elements.query.value.trim();\n\n  if (!query) {\n    loader.classList.add(hiddenClass);\n    btnLoadMore.classList.add(hiddenClass);\n\n    showErrorMessage('Please search for something');\n    return;\n  }\n\n  try {\n    const { hits, totalHits } = await getPhotos(query);\n\n    maxPage = Math.ceil(totalHits / 15);\n\n    markupPhoto(hits, ulEl);\n    \n    if (hits.length > 0 && hits.length !== totalHits && page <= maxPage) {\n      btnLoadMore.classList.remove(hiddenClass);\n   } else if (!hits.length) {\n      btnLoadMore.classList.add(hiddenClass);\n\n      showErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n    } else {\n      btnLoadMore.classList.add(hiddenClass);\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.classList.add(hiddenClass);\n\n    resetForm(form);\n  }\n}\n\nasync function handleLoadMore() {\n  page += 1;\n  loaderLoadMore.classList.remove(hiddenClass);\n  btnLoadMore.classList.add(hiddenClass);\n\n  const getHeightImgCard = document.querySelector('.gallery-item').getBoundingClientRect();\n\n  try {\n    const { hits } = await getPhotos(query, page);\n    markupPhoto(hits, ulEl);\n  } catch (error) {\n    console.error(error);\n  } finally {\n    window.scrollBy({\n      top: getHeightImgCard.height * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n    loaderLoadMore.classList.add(hiddenClass);\n    btnLoadMore.classList.remove(hiddenClass);\n    if (page === maxPage) {\n      btnLoadMore.classList.add(hiddenClass);\n      btnLoadMore.removeEventListener('click', handleLoadMore);\n      iziToast.show({\n        title: 'Hey',\n        titleSize: '30',\n        messageSize: '25',\n        color: 'blue',\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  }\n}\n\nfunction markupPhoto(hits) {\n  const markup = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n              width=\"360\"\n            />\n          </a>\n          <ul class=\"img-list\">\n  <li class=\"img-info\">\n   <p class=\"img-text\">Likes: <br><span>${likes}</span></p>\n   <p class=\"img-text\">Views: <br><span>${views}</span></p>\n   <p class=\"img-text\">Comment: <br><span>${comments}</span></p>\n   <p class=\"img-text\">Downloads: <br><span>${downloads}</span></p>\n   </li>\n   </ul>\n        </li>`\n    )\n    .join('');\n  ulEl.insertAdjacentHTML('beforeend', markup);\n  modalLightboxGallery.refresh();\n}\n"],"names":["BASE_URL","API_KEY","getPhotos","value","page","axios","hiddenClass","showErrorMessage","message","iziToast","resetForm","form","modalLightboxGallery","SimpleLightbox","searchForm","ulEl","btnLoadMore","loader","loaderLoadMore","maxPage","query","handleSearch","handleLoadMore","event","hits","totalHits","markupPhoto","error","getHeightImgCard","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"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"}